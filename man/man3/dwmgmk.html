<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="./dwmgmk.css" type="text/css" media="all"/>
  <title>DWMGMK(3)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">DWMGMK(3)</td>
    <td class="head-vol">Library Functions Manual</td>
    <td class="head-rtitle">DWMGMK(3)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">dwm_bison</code>,
    <code class="Nm">dwm_curpath</code>, <code class="Nm">dwm_cwd</code>,
    <code class="Nm">dwm_files</code>, <code class="Nm">dwm_flex</code>,
    <code class="Nm">dwm_funcs</code>, <code class="Nm">dwm_include</code>,
    <code class="Nm">dwm_pwd</code>, <code class="Nm">dwm_relpath</code>,
    <code class="Nm">dwm_relpwd</code>, <code class="Nm">dwm_reverse</code>,
    <code class="Nm">dwm_rgxmatch</code>,
    <code class="Nm">dwm_rgxreplace</code>,
    <code class="Nm">dwm_rgxsearch</code>, <code class="Nm">dwm_rgxsubst</code>,
    <code class="Nm">dwm_rotl</code>, <code class="Nm">dwm_rotr</code>,
    <code class="Nm">dwm_sort</code>, <code class="Nm">dwm_subdirs</code>,
    <code class="Nm">dwm_thisdir</code>, <code class="Nm">dwm_uniqleft</code>,
    <code class="Nm">dwm_uniqright</code>, <code class="Nm">dwm_my</code>
    &#x2014; <span class="Nd">GNU make extensions</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="LIBRARY"><a class="permalink" href="#LIBRARY">LIBRARY</a></h1>
<p class="Pp"><span class="Lb">library &#x201C;dwm_gmk.so&#x201D;</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<div class="Bd Li">
<pre>load /usr/local/lib/dwm_gmk.so(dwm_gmk_setup)

$(eval $(dwm_bison bison_source_file[,bison_args]))
$(dwm_curpath )
$(dwm_cwd )
$(dwm_files directory_path,regexp)
$(eval $(dwm_flex flex_source_file[,flex_args]))
$(dwm_funcs&#x00A0;)
$(dwm_include filename)
$(dwm_include verbose,filename)
$(dwm_my expression)
$(my expression)
$(myns name)
$(dwm_pwd&#x00A0;)
$(dwm_relpath from,to)
$(dwm_reverse text)
$(dwm_rgxmatch&#x00A0;regexp,text)
$(dwm_rgxreplace&#x00A0;regexp,format,text)
$(dwm_rgxsearch&#x00A0;regexp,text)
$(dwm_rgxsubst&#x00A0;regexp,format,text)
$(dwm_rotl text)
$(dwm_rotr text)
$(dwm_sort text)
$(dwm_subdirs&#x00A0;)
$(dwm_thisdir&#x00A0;)
$(dwm_thisdirabs&#x00A0;)
$(dwm_uniqleft text)
$(dwm_uniqright text)</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">dwm_gmk.so contains a set of utility functions that can be loaded
    into GNU make via its <i>load</i> directive. Once loaded, these functions
    can be used in the same manner as GNU make built-in functions.</p>
<section class="Ss">
<h2 class="Ss" id="dwm_bison"><a class="permalink" href="#dwm_bison">dwm_bison</a></h2>
<p class="Pp">Usage: <b>$(eval $(dwm_bison
  bison_source_file[,bison_args]))</b></p>
<p class="Pp">Creates a rule to run <a class="Xr">bison(1)</a> on the given
    <i>bison_source_file</i>. For example, if you add this line to a
  Makefile:</p>
<div class="Bd Li">
<pre>&#x00A0;
   $(eval $(dwm_bison parse.y,-d))

</pre>
</div>
The following will be generated and evaluated by GNU make:
<div class="Bd Li">
<pre>&#x00A0;
   BISONTARGETS += parse.cc parse.hh
   parse.cc parse.hh &amp;: parse.y
           bison -d -oparse.cc $&lt;</pre>
</div>
<p class="Pp">Note that we add to <i>BISONTARGETS</i> so that a 'clean' rule can
    use it to remove files generated by bison.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_curpath"><a class="permalink" href="#dwm_curpath">dwm_curpath</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_curpath&#x00A0;)</b></pre>
</div>
<p class="Pp">Returns the current path, using std::filesystem::current_path()
    from the standard C++ library (C++17 and later). This is the same as the
    result of <a class="Xr">getcwd(3)</a> from POSIX.</p>
<p class="Pp">Note that this is different than the result of
    <a class="Sx" href="#dwm_pwd">dwm_pwd</a>; GNU make does not set the PWD
    environment variable when invoked as 'make -C somedir ...'.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_files"><a class="permalink" href="#dwm_files">dwm_files</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_files directory_path,regexp)</b></pre>
</div>
<p class="Pp">Returns a list of files contained in <i>directory_path</i> whose
    name matches the regular expression <i>regexp</i>. Note that <i>regexp</i>
    is an ECMAScript regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_flex"><a class="permalink" href="#dwm_flex">dwm_flex</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(eval $(dwm_flex flex_source_file[,flex_args]))</b></pre>
</div>
<p class="Pp">Creates a rule to run <a class="Xr">flex(1)</a> on the given
    <i>flex_source_file</i>. For example, if you add this line to a
  Makefile:</p>
<div class="Bd Li">
<pre>&#x00A0;
   $(eval $(dwm_flex lexer.lex,-o lexer.cc))

</pre>
</div>
The following will be generated and evaluated by GNU make:
<div class="Bd Li">
<pre>&#x00A0;
   FLEXTARGETS += lexer.cc
   lexer.cc: lexer.lex
           flex -o lexer.cc $&lt;</pre>
</div>
<p class="Pp">Note that we add to
    &#x2018;<code class="Li">FLEXTARGETS</code>&#x2019; so that a
    &#x2018;<code class="Li">clean</code>&#x2019; rule can use it to remove
    files generated by flex.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_include"><a class="permalink" href="#dwm_include">dwm_include</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_include files...)</b>
Usage: <b>$(dwm_include verbose,files...)</b></pre>
</div>
<div class="Bd Pp">Similar to GNU make's built-in <i>include</i> directive, but
  will push each included file onto an internal stack while it is being
  processed and pop it from the stack when done. This allows
  <a class="Sx" href="#dwm_thisdir">dwm_thisdir</a> to continue to work
  correctly after including a file.</div>
<div class="Bd Pp">In the second form,
  <a class="Sx" href="#dwm_include">dwm_include</a> will print a line showing
  which file is being included. This can be useful when trying to reduce
  duplicate inclusions.</div>
<div class="Bd Pp">The internal stack of Makefiles maintained by
  <a class="Sx" href="#dwm_include">dwm_include</a> can be accessed via the
  <i>dwm_incstack</i> variable, with the current Makefile (the one being
  processed) being:</div>
<div class="Bd Pp Li">
<pre>&#x00A0;
   $(firstword $(dwm_incstack))</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_my"><a class="permalink" href="#dwm_my">dwm_my</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_my varname)</b>
Usage: <b>$(dwm_my varname := value)</b>
Usage: <b>$(dwm_my varname = value)</b></pre>
</div>
<p class="Pp">The intent of <i>dwm_my</i> is to set or get variable values from
    a namespace that is separate from the global GNU make namespace. This allows
    one to create variables that do not conflict with global variables despite
    sharing the same name. Such variables are ony accessible using
    <i>dwm_my</i>.</p>
<p class="Pp"><i>varname</i> can be fully qualified by using the form
    <i>namespace.varname</i>. For example:</p>
<div class="Bd Pp Li">
<pre>&#x00A0;
   $(dwm_my lib.srcs := foo.c bar.c orange.c)
   $(dwm_my lib.objs := $(patsubst %.c,%.o,$(dwm_my lib.srcs)))
   libfoo.a: $(dwm_my lib.objs)
           ar rv $@ $^</pre>
</div>
<div class="Bd Pp">If <i>varname</i> is not fully qualified, the last namespace
  set with <a class="Sx" href="#dwm_myns">dwm_myns</a> will be used as the
  namespace.</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_myns"><a class="permalink" href="#dwm_myns">dwm_myns</a></h2>
<div class="Bd Li">
<pre>Usage: <b>($dwm_myns namespace)</b></pre>
</div>
<div class="Bd Pp">Sets the current namespace used by
  <a class="Sx" href="#dwm_my">dwm_my</a>.</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_pwd"><a class="permalink" href="#dwm_pwd">dwm_pwd</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_pwd&#x00A0;)</b></pre>
</div>
<p class="Pp">Returns the value of the PWD environment variable. Note that GNU
    make does not modify PWD. A recursive make using <b>make -C ...</b> will not
    change PWD. Hence this function can be used to determine the working
    directory from which the user ran GNU make.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_relpath"><a class="permalink" href="#dwm_relpath">dwm_relpath</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_relpath from,to)</b></pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_rgxmatch"><a class="permalink" href="#dwm_rgxmatch">dwm_rgxmatch</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_rgxmatch&#x00A0;regexp,text)</b></pre>
</div>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_rgxmatch ^d(.+),dwm)</b>
   &#x21D2; dwm wm</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_rgxreplace"><a class="permalink" href="#dwm_rgxreplace">dwm_rgxreplace</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_rgxreplace&#x00A0;regexp,format,text)</b></pre>
</div>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_rgxreplace a|e|i|o|u,[$$&amp;],Quick brown fox)</b>
   &#x21D2; Q[u][i]ck br[o]wn f[o]x</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_rgxsearch"><a class="permalink" href="#dwm_rgxsearch">dwm_rgxsearch</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_rgxsearch&#x00A0;regexp,text)</b></pre>
</div>
<p class="Pp">Searches <i>text</i> for matches to the regular expression
    <i>regexp</i>. Returns all matches as a space-separated list.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_rgxsubst"><a class="permalink" href="#dwm_rgxsubst">dwm_rgxsubst</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_rgxsubst&#x00A0;regexp,format,text)</b></pre>
</div>
<p class="Pp">Returns a string where each instance of the regular expression
    <i>regexp</i> in each word of <i>test</i> is replaced with <i>format</i>.
    Note that <i>regexp</i> is an ECMAScript regular expression. Under the hood,
    this function uses std::regex_replace() from the standard C++ library,
    executing it on each word in <i>text</i>. Note that the escaped '$1' is due
    to the C++ library using '$' instead of '\' for backreferences.</p>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_rgxsubst (.+)\.cc$$,$$1.o,foo.cc bar.cc foobar.cc))</b>
   &#x21D2; foo.o bar.o foobar.o</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_relpwd"><a class="permalink" href="#dwm_relpwd">dwm_relpwd</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_relpwd path)</b></pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_reverse"><a class="permalink" href="#dwm_reverse">dwm_reverse</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_reverse text)</b></pre>
</div>
<p class="Pp">Returns the words in <i>text</i> in reverse order.</p>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_reverse cat dog cow horse hen)</b>
   &#x21D2; hen horse cow dog cat</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_rotl"><a class="permalink" href="#dwm_rotl">dwm_rotl</a></h2>
<p class="Pp">Usage: <b>$(dwm_rotl text[,count])</b></p>
<p class="Pp">Returns the words in <i>text</i> rotated to the left <i>count</i>
    positions. If <i>count</i> is not given, 1 will be used.</p>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_rotl cat dog cow horse hen,3)</b>
   &#x21D2; horse hen cat dog cow</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_rotr"><a class="permalink" href="#dwm_rotr">dwm_rotr</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_rotr text[,positions])</b></pre>
</div>
<p class="Pp">Returns the words in <i>text</i> rotated to the right <i>count</i>
    positions. If <i>count</i> is not given, 1 will be used.</p>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_rotr cat dog cow horse hen,3)</b>
   &#x21D2; cow horse hen cat dog</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_sort"><a class="permalink" href="#dwm_sort">dwm_sort</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_sort text)</b></pre>
</div>
<p class="Pp">Returns a sorted version of the words in <i>text</i>
    (lexicographical). Unlike GNU make's built-in <i>sort</i>, does not remove
    duplicates.</p>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_sort d c b a c b a b a b a)</b>
   &#x21D2; a a a a b b b b c c d</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_subdirs"><a class="permalink" href="#dwm_subdirs">dwm_subdirs</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_subdirs&#x00A0;directory_path,regexp)</b></pre>
</div>
<p class="Pp">Returns a list of subdirectories of <i>directory_path</i> whose
    name matches the regular expression <i>regexp</i>. Note that <i>regexp</i>
    is an ECMAScript regular expression.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_thisdir"><a class="permalink" href="#dwm_thisdir">dwm_thisdir</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_thisdir&#x00A0;)</b></pre>
</div>
<div class="Bd Pp">Returns the directory in which the current Makefile lives,
  assuming it is called at the top of the Makefile before any <i>include</i>
  directives or that <a class="Sx" href="#dwm_include">dwm_include</a> is always
  used in place of <i>include</i>. Note that the returned value is relative to
  the working directory (as would be returned by <a class="Xr">getcwd(3)</a>
  from POSIX).</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_thisdirabs"><a class="permalink" href="#dwm_thisdirabs">dwm_thisdirabs</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_thisdirabs&#x00A0;)</b></pre>
</div>
<div class="Bd Pp">Returns the directory in which the current Makefile lives,
  assuming it is called at the top of the Makefile before any <i>include</i>
  directives or that <a class="Sx" href="#dwm_include">dwm_include</a> is always
  used instead of <i>include</i>. The returned value is an absolute path.</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_uniqleft"><a class="permalink" href="#dwm_uniqleft">dwm_uniqleft</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_uniqleft text)</b></pre>
</div>
<p class="Pp">Returns a copy of <i>text</i> with rightmost duplicates removed
    (leftmost retained). Unlike GNU make's built-in <i>sort</i>, does not sort.
    Useful for removing duplicate complier and linker flags or filenames without
    changing the order.</p>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_uniqleft a b d d b a)</b>
   &#x21D2; a b d</pre>
</div>
</section>
<section class="Ss">
<h2 class="Ss" id="dwm_uniqright"><a class="permalink" href="#dwm_uniqright">dwm_uniqright</a></h2>
<div class="Bd Li">
<pre>Usage: <b>$(dwm_uniqright text)</b></pre>
</div>
<p class="Pp">Returns a copy of <i>text</i> with leftmost duplicates removed
    (rightmost retained). Unlike GNU make's built-in <i>sort</i>, does not sort.
    Useful for removing duplicate compiler and linker flags or filenames without
    changing the order.</p>
<p class="Pp">Example:</p>
<div class="Bd Li">
<pre>   <b>$(dwm_uniqleft a b d d b a)</b>
   &#x21D2; d b a</pre>
</div>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><cite class="Rs">See
    <a class="Lk" href="https://en.cppreference.com/w/cpp/regex/ecmascript">https://en.cppreference.com/w/cpp/regex/ecmascript</a>
    for the details of the modified ECMAScript regular expression
    grammar.</cite></p>
<p class="Pp"><cite class="Rs">See
    <a class="Lk" href="https://262.ecma-international.org/5.1/#sec-15.5.4.11">https://262.ecma-international.org/5.1/#sec-15.5.4.11</a>
    for information on ECMAScript backreferences.</cite></p>
<p class="Pp"><cite class="Rs">See
    <a class="Lk" href="https://en.cppreference.com/w/cpp/regex/regex_replace">https://en.cppreference.com/w/cpp/regex/regex_replace</a>
    for inforomation on std::regex_replace() from the standard C++
    library.</cite></p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp"><span class="An">Daniel W. McRobb</span>
    <a class="Mt" href="mailto:dwm@mcplex.net">dwm@mcplex.net</a></p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">October 17, 2024</td>
    <td class="foot-os">macOS 15.0</td>
  </tr>
</table>
</body>
</html>
